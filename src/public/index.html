<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>mock server</title>
</head>
<body>
	<p>Example mock server</p>
	<button id="login">Login</button>
	<pre id="response" style="margin-top: 50px;"></pre>

	<script>
		var username = 'moocss';
		var loggedIn = false;
		document.getElementById('login').addEventListener('click', (e) => {
			e.target.disabled = true;
			fetch('/' + (loggedIn ? 'logout' : 'login'), {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				},
				body: JSON.stringify({ username })
			})
				.then(response => response.json())
				.then(data => {
					loggedIn = !loggedIn;
					e.target.disabled = false;
					e.target.innerText = loggedIn ? 'Logout' : 'Login';
					document.getElementById('response').innerText = JSON.stringify(data, null, 2);
				})
		});
	</script>
</body>
</html>